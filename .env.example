# Copiar a .env.local y completar valores
# Desarrollo local y pruebas de Mercado Pago

# Supabase (requerido para /api/tickets/*)
SUPABASE_URL=https://tu-proyecto.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
# Server-only (recomendado): bypass RLS en API routes/webhooks
# NO exponer en cliente. Configurar en Vercel solo como variable server-side.
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Mercado Pago (requerido para crear preferencias y webhook)
MP_ACCESS_TOKEN=TEST-xxxxx
# Production: usar Access Token de producción

# Webhooks secret signature (recomendado): se obtiene en Your integrations → Webhooks → Secret signature
MP_WEBHOOK_SECRET=your_secret_signature_here

# Pago on-site (Bricks): si está configurado, /tickets y /entradas usan reserve + /pago en lugar de Checkout Pro.
# Public key (solo cliente): Panel MP → Tu aplicación → Credenciales → Public Key.
NEXT_PUBLIC_MP_PUBLIC_KEY=
# Secret para token de un solo uso en GET /api/orders/payment-data (ej. openssl rand -hex 32).
MP_PAYMENT_DATA_SECRET=

# Resend - Email (opcional; sin esto no se envía email con ticket)
RESEND_API_KEY=re_xxxxx

# URL base (para redirects y webhook)
# Local: http://localhost:3000
# Producción: https://www.festivalpucon.cl
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# Página /success: redirección tras pago exitoso (opcional)
# Por defecto: https://www.festivalpucon.cl
# Siguiente módulo: ej. https://www.festivalpucon.cl/mis-entradas
NEXT_PUBLIC_SUCCESS_REDIRECT_URL=
# Segundos antes de redirigir (1-60, por defecto 10)
NEXT_PUBLIC_SUCCESS_REDIRECT_SECONDS=10

# Post-compra: firma QR para GET /api/orders/[id] y /checkout/success/[id]
# Solo servidor. Valor largo y aleatorio (ej. openssl rand -hex 32).
QR_SIGNING_SECRET=your_32_byte_hex_secret_here

# Admin: clave completa para /admin/stock, inventario, etc. Generar valor aleatorio (ej. openssl rand -hex 24).
ADMIN_SECRET=your_admin_secret_here

# Control de acceso: clave sencilla para /admin/scanner-v2 y validar QR (ej. "acceso"). Quienes usan solo el escáner no necesitan la clave Admin.
ACCESS_CONTROL_KEY=acceso

# Worker cron: procesa cola PDF+email (job_queue). Invocar GET /api/workers/process-tickets
# con header Authorization: Bearer <CRON_SECRET> o x-cron-secret: <CRON_SECRET>.
# Generar valor aleatorio (ej. openssl rand -hex 32).
CRON_SECRET=your_cron_secret_here

# Rate limit (opcional): Upstash Redis para límite por IP en /api/orders/access-token y /api/orders/by-reference.
# Sin estas variables se usa fallback en memoria (no fiable en serverless; solo una instancia).
# Crear base en https://console.upstash.com/
# UPSTASH_REDIS_REST_URL=https://xxx.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your_token_here
